<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/polymerfire/firebase-document.html">
<link rel="import" href="../../bower_components/wired-card/wired-card.html">
<link rel="import" href="../../bower_components/wired-button/wired-button.html">
<link rel="import" href="../../bower_components/wired-input/wired-input.html">
<link rel="import" href="../../bower_components/wired-item/wired-item.html">
<link rel="import" href="../../bower_components/wired-listbox/wired-listbox.html">

<dom-module id="view-room">
  <template>

    <style>
      wired-card {
        width: 20%;
        height: 50%;
      }
    </style>

    <h3>Room: {{room.name}}</h3>


      <wired-card>
        <h4>Good</h4>
        <wired-listbox>
          <template is="dom-repeat" items="{{stickiesAsArray(room.goods)}}">
            <wired-item text="{{item.text}}"></wired-item>
          </template>
        </wired-listbox>
      </wired-card>
      
      <wired-card>
        <h4>Bad</h4>
        <wired-listbox>
          <template is="dom-repeat" items="{{stickiesAsArray(room.bads)}}">
            <wired-item text="{{item.text}}"></wired-item>
          </template>
        </wired-listbox>
      </wired-card>

      <wired-card>
        <h4>Try</h4>
        <wired-listbox>
          <template is="dom-repeat" items="{{stickiesAsArray(room.trys)}}">
            <wired-item text="{{item.text}}"></wired-item>
          </template>
        </wired-listbox>
      </wired-card>


    <firebase-document path="/rooms/{{roomKey}}" data={{room}}></firebase-document>

  </template>

  <script>
    class ViewRoom extends Polymer.Element {
      static get is() { return 'view-room'; }

      static get properties() {
        return {
          roomKey: String
          };
        }

      hasStickies(stickies) {
        return Object.keys(stickies || {}).length;
      }

      stickiesAsArray(stickies) {
          return Object
                  .keys(stickies || {})
                  .map(stickyKey => stickies[stickyKey]);
      }
    }

    window.customElements.define(ViewRoom.is, ViewRoom);
  </script>
</dom-module>